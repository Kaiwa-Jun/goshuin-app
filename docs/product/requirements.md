# 要件定義

## 確定事項

### 1. 対象スポット

**決定**: 神社＋寺院（両方含む）

- 当初「神社」のみの記載だったが、御朱印は寺院でも授与されるため両方を対象とする
- テーブル名: `spots` に決定（旧 `shrines`）
- `type` カラムで shrine/temple を区別

### 2. 画像要件

**決定**: 御朱印画像は必須（当初の「任意」から変更）

- 理由: 画像なしだと単なる「訪問チェックイン」になり、御朱印の魅力（デザイン、筆跡、限定御朱印）を活かせない
- コア体験（御朱印コレクション）を強化する方向

### 3. 登録目標

**決定**: 「10秒以内に登録完了」（当初の「2タップ」から変更）

- 「2タップ」は非現実的（候補選択、画像追加、保存で最低3-4タップ）
- 体験目標として「10秒以内」の方が現実的で測定可能

### 4. 検索半径

**決定**: デフォルト2-3km、候補が少ない場合は自動拡大

仙台市周辺の調査結果:

- 宮城県全体: 神社942社、寺院940カ寺（合計約1,880件）
- 仙台市: 約470件（ホトカミ掲載数）

半径別の推定候補数（仙台市街地）:

| 半径 | 推定候補数 |
|---|---|
| 1km | 3-5件 |
| 2km | 10-15件 |
| 3km | 20-30件 |
| 5km | 50-80件 |

推奨: デフォルト2-3kmで、候補が少ない場合は自動拡大するロジックが理想的

## MVP機能一覧

### 地図画面（メイン）

- アプリ起動時に地図表示
- 訪問済み神社をピン表示
- 神社ごとにピンは1つのみ（再訪してもピンは増えない）
- ピンタップで神社詳細表示

### 御朱印記録

**記録手順**:

1. 記録ボタン押下
2. 現在地周辺神社候補表示
3. 神社選択
4. 御朱印画像追加（必須）
5. 保存

**目標**: 10秒以内に登録完了

### 神社候補取得

- デフォルト半径2-3km以内で検索（候補少なければ拡大）
- 候補最大5件表示
- 地図上には範囲内すべてピン表示
- 見つからない場合、ユーザー追加

### 神社詳細表示

ピンタップ時:

- 神社名
- 訪問回数
- 最新御朱印画像
- 過去履歴一覧

### ギャラリー

- 御朱印画像一覧表示
- 新しい順表示
- 詳細表示可能

### 登録完了演出

登録完了後:

- 地図に戻る
- ピン出現アニメーション
- 訪問数表示
- コレクション増加を演出

## 将来拡張予定

- 制覇率表示
- バッジ・実績
- 通知（神社付近で記録リマインド）
- 巡礼ルート生成
- エリア制覇
- SNS共有
- 御朱印帳ページUI再現
- 神社イベント情報
